{% extends 'base.html' %}
{% load static from staticfiles %}
{% load crispy_forms_tags %}

{% block content %}

<div class="row">
    <div class="col-auto mx-auto">
        <a href="{% url 'products' %}" class="btn btn-sm bss-red bss-white-text" role="button">
            <i class="fas fa-shoe-prints bss-yellow-text"></i> Back to Products</a>
    </div>
</div>
<div class="row">&nbsp;</div>

<div class="row">
    <div class="col-12">
        <div class="display card card-default border-red full-width">
            <div class="card-header">
                <div class="row">
                    <div class="col-12">
                        <b>{{product.setnumber}}</b> - {{product.name}}
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-12 col-md-6">
                        <center>
                            <img class="productSlides" src="{{ MEDIA_URL }}{{ product.image1 }}" style="">
                            <img class="productSlides" src="{{ MEDIA_URL }}{{ product.image2 }}" style="display:none">
                        </center>
                        <div class="row">
                            <div class="col-6 mx-auto">
                                <center>
                                    <img class="productThumbnail" src="{{ MEDIA_URL }}{{ product.image1 }}" onclick="showProductSlide(1)">
                                </center>
                            </div>
                            <div class="col-6 mx-auto">
                                <center>
                                    <img class="productThumbnail" src="{{ MEDIA_URL }}{{ product.image2 }}" onclick="showProductSlide(2)">
                                </center>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <h4><b>Series:</b> {{product.category}}</h4>
                        <h6>{{product.description}}</h6>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <div class="row">
                    <div class="col-7"><h6>&euro; {{ product.price }}</h6></div>
                    <div class="col-5">
                        <form method="post" action="{% url 'add_to_cart' product.id %}">
                            {% csrf_token %}
                            <div class="input-group input-group-sm">
                                <input name='quantity' type="number" min="1" max="999" class="form-control" placeholder="Qty" value="1">
                                <span class="input-group-append">
                                    <button class="btn btn-sm bss-white-text bss-red" type="submit"><i class="fas fa-cart-plus bss-yellow-text"></i> Add</button>
                                </span>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</div>

<div class="row my-1">
    <div class="col-12">
        <div id="CommentAdd">
            <div class="card border-red">
                <div class="card-header bss-red bss-yellow-text" id="heading">
                    <button class="btn btn-link collapsed bss-white-text" type="button" data-toggle="collapse" data-target="#collapse" aria-expanded="true" aria-controls="collapse">
                     <i class="fas fa-caret-square-down bss-yellow-text"></i> Leave a comment
                    </button>
                </div>
                <div id="collapse" class="collapse" aria-labelledby="heading" data-parent="#CommentAdd">
                    <div class="card-body">
                        <form method="POST" enctype="multipart/form-data">
                            {% csrf_token %} 
                            <div class="row">
                                <div class="col-12 col-sm-3">
                                    {{ comment_form.author | as_crispy_field }}
                                </div>
                                <div class="col-12 col-sm-9">
                                    {{ comment_form.content | as_crispy_field }}
                                </div>
                            </div>
                            <button type="submit" class="btn btn-default bss-red bss-white-text">
                                <i class="far fa-check-square bss-yellow-text"></i> Save</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% if comments %}
<div class="row">
    <div class="col-12">
        <div class="card no-padding border-red">
            <div class="card-body bss-yellow">
                <div class="row">
                    {% for comment in comments %}
                    <div class="col-12 col-sm-6 no-padding">
                        <div class="card border-red m-1">
                            <div class="card-body bss-white">
                                <p><b>{{ comment.content }}</b></p>
                                <sup>{{ comment.author }} - {{ comment.date }}</sup>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    
</div>
{% endif %}

{% endblock %}